import matplotlib as mpl
mpl.use("agg")

import matplotlib.cm as cm

def smoothen(colors, skip=1):
	Z = [colors[0][0]]
	prev_color, prev_num = colors[0]
	for i in range(1, len(colors)):
		this_color, this_num = colors[i]
		diff = float(this_num - prev_num)
		num = int(diff / skip) + 1
		slopes = [float(this_color[j]-prev_color[j])/diff for j in range(3)]
		for j in range(1, num):
			R = prev_color[0] + j*skip*slopes[0]
			G = prev_color[1] + j*skip*slopes[1]
			B = prev_color[2] + j*skip*slopes[2]
			# B = percent*this_color[2]  + (1-percent)*prev_color[2]
			Z.append((R, G, B))

		prev_color, prev_num = this_color, this_num

	return Z

def radar_colormap():
	radar_colors = [
		(0./255., 0./255., 0./255.), # -15
		(61./255., 3./255., 78./255.), # -5
		(55./255., 55./255., 55./255.), # 5
		(150./255., 150./255., 150./255.), # 15
		(104./255., 243./255., 97./255.), # 20
		(36./255., 191./255., 41./255.), # 25
		(0./255., 110./255., 0./255.), # 32.5
		(255./255., 255./255., 0./255.), # 37.5
		(255./255., 145./255., 0./255.), # 48.5
		(255./255., 0./255., 0./255.), # 51.5
		(150./255., 0./255., 0./255.), # 57.5
		(136./255., 0./255., 130./255.), # 62.5 
		(4./255., 201./255., 201./255.), # 72.5
		(255./255., 255./255., 255./255.), # 77.5
		(0./255., 0./255., 0./255.), # 85
		(0./255., 0./255., 0./255.) # 95
	]

	cmap = cm.colors.ListedColormap(radar_colors)
	vmin = -15
	vmax = 95

	return cmap, vmin, vmax

def temperature_colormap():
	temperature_colors = [
               [( 50./255.,   0./255.,    50./255.),   -40],
                [( 75./255.,   0./255.,    75./255.),   -30],
                [( 75./255.,  15./255.,   100./255.),   -20],
                [( 75./255.,  25./255.,   150./255.),   -10],
                [(125./255.,  50./255.,   175./255.),     0],
                [(175./255.,  50./255.,   255./255.),    10],
                [(215./255.,  50./255.,   255./255.),    15],
                [(235./255.,  50./255.,   255./255.),    18],
                [(  0./255.,   0./255.,   115./255.),    22],
                [(  0./255.,   0./255.,   175./255.),    26],
                [(  0./255.,   0./255.,   200./255.),    29],
                [(  0./255.,   0./255.,   255./255.),    32],
                [( 10./255., 225./255.,   245./255.),    34],
                [( 50./255., 225./255.,   250./255.),    36],
                [( 75./255., 225./255.,   250./255.),   38],
                [(150./255., 250./255.,   125./255.),   40],
                [(135./255., 245./255.,   75./255.),    42],
                [(130./255., 240./255.,    25./255.),    45],
                [(115./255., 235./255.,    50./255.),    48],
                [(185./255., 255./255.,    25./255.),    52],
                [(215./255., 255./255.,    25./255.),    55],
                [(225./255., 255./255.,     0./255.),    60],
                [(255./255., 195./255.,     0./255.),    65],
                [(200./255., 150./255.,     0./255.),    70],
                [(255./255.,   0./255.,     0./255.),    80],
                [(205./255.,   0./255.,     0./255.),   85],
                [(155./255.,   0./255.,     0./255.),   90],
                [(100./255.,   0./255.,     0./255.),   95],
                [(100./255.,   0./255.,    50./255.),  100],
                [(150./255.,   0./255.,    75./255.),  105],
                [(150./255.,   0./255.,   150./255.),  110],
                [(150./255.,   0./255.,   175./255.),  115],
                [(175./255.,   0./255.,   175./255.),  120]
        ]

	cmap = cm.colors.ListedColormap(smoothen(temperature_colors, skip=0.1))
	vmin = -40
	vmax = 130

	return cmap, vmin, vmax

def precip_colormap():
	precip_colors = [
		[(255./255., 255./255., 255./255.), 0],
		[(241./255., 255./255., 241./255.), 0.01],
		[(204./255., 255./255., 204./255.), 0.1],
		[(153./255., 255./255., 153./255.), 0.25],
		[(38./255., 250./255., 118./255.), 0.5],
		[(4./255., 81./255., 13./255.), 1],
		[(242./255., 246./255., 1./255.), 2],
		[(242./255., 12./255., 1./255.), 3],
		[(254./255., 1./255., 217./255.), 4],
		[(13./255., 1./255., 1./255.), 5]
		#[(255./255., 255./255., 255./255.), 0.05],
		#[(60./255., 60./255., 180./255.), 1],
		#[(60./255., 180./255., 60./255.), 3],
		#[(255./255., 255./255., 60./255.), 5]
		## [(39./255., 39./255., 255./255.), 5]
	]

	cmap = cm.colors.ListedColormap(smoothen(precip_colors, skip=0.01))
	vmin = 0
	vmax = 5

	return cmap, vmin, vmax



def alt_precip_colormap():
        alt_precip_colors = [
                [(253./255., 163./255., 102./255.), 0],
                [(253./255., 163./255., 102./255.), 40],
                [(253./255., 245./255., 147./255.), 42],
                [(240./255., 253./255., 147./255.), 44],
                [(207./255., 252./255., 148./255.), 46],
                [(165./255., 235./255., 177./255.), 48],
                [(114./255., 165./255., 167./255.), 50],
                [(105./255., 143./255., 174./255.), 52],
                [(108./255., 103./255., 177./255.), 60]
                #[(255./255., 255./255., 255./255.), 0.05],
                #[(60./255., 60./255., 180./255.), 1],
                #[(60./255., 180./255., 60./255.), 3],
                #[(255./255., 255./255., 60./255.), 5]
                ## [(39./255., 39./255., 255./255.), 5]
        ]

        cmap = cm.colors.ListedColormap(smoothen(alt_precip_colors, skip=1))
        vmin = 0
        vmax = 60

        return cmap, vmin, vmax




def precip_custom_colormap():
        precip_custom_colors = [
		[(255./255., 255./255., 255./255.), 0],
                [(241./255., 255./255., 241./255.), .01],		
                [(204./255., 255./255., 204./255.), .1],
                [(153./255., 255./255., 153./255.), .25],
                [(38./255., 250./255., 118./255.), .50],
                [(4./255., 81./255., 13./255.), 1],
                [(242./255., 246./255., 1./255.), 2],
                [(242./255., 12./255., 1./255.), 3],
                [(254./255., 1./255., 217./255.), 4],
                [(13./255., 1./255., 1./255.), 5]
        ]

        cmap = cm.colors.ListedColormap(smoothen(precip_custom_colors, skip=.01))
        vmin = 0
        vmax = 5

        return cmap, vmin, vmax

def dewpoint_colormap():
	dewpoint_colors = [
		[(213./255., 213./255., 213./255.), -20],
		[(180./255., 162./255., 104./255.), 0],
		[(255./255., 255./255., 255./255.), 32],
		[(97./255., 147./255., 96./255.), 54],
		[(76./255., 139./255., 76./255.), 55],
		[(21./255., 61./255., 21./255.), 80]
		#[(202./255., 231./255., 255./255.), 60],
		#[(40./255., 98./255., 136./255.), 80]
	]

	cmap = cm.colors.ListedColormap(smoothen(dewpoint_colors, skip=0.1))
	vmin = -20
	vmax = 80

	return cmap, vmin, vmax

def ttct_colormap():
	ttct_colors = [
	        [(255./255., 255./255., 255./255.), 0],
                [(255./255., 255./255., 0./255.), 1],
                [(255./255., 165./255., 0./255.), 2],
                [(255./255., 0./255., 0./255.), 3],

	]
	cmap = cm.colors.ListedColormap(smoothen(ttct_colors, skip=0.01))
        vmin = 0
        vmax = 3
	return cmap, vmin, vmax

def wind_colormap():
	wind_colors = [
		[(255./255., 255./255., 255./255.), 0],
		[(187./255., 187./255., 187./255.), 9],
		[(157./255., 166./255., 224./255.), 10],
		[(40./255., 38./255., 160./255.), 30],
		[(247./255., 3./255., 195./255.), 45],
		[(205./255., 6./255., 19./255.), 60],
		[(242./255., 232./255., 11./255.), 80],
		[(254./255., 253./255., 169./255.), 100]
		#[(255./255., 255./255., 255./255.), 2],
		#[(143./255., 143./255., 255./255.), 25],
		#[(39./255., 39./255., 255./255.), 60]
	]

	cmap = cm.colors.ListedColormap(smoothen(wind_colors, skip=0.1))
	vmin = 0
	vmax = 100

	return cmap, vmin, vmax

def humidity_colormap():
	humidity_colors = [
		[(255./255., 255./255., 255./255.), 0],
		[(3./255., 67./255., 3./255.), 100]
	]

	cmap = cm.colors.ListedColormap(smoothen(humidity_colors, skip=0.1))
	vmin = 0
	vmax = 100

	return cmap, vmin, vmax

def solar_colormap():
	solar_colors = [
		[(0./255., 0./255., 0./255.), 0],
		[(51./255., 0./255., 0./255.), 10],
		[(151./255., 0./255., 0./255.), 200],
		[(204./255., 102./255., 0./255.), 600],
		[(255./255., 255./255., 51./255.), 1050],
		[(250./255., 249./255., 210./255.), 1500]
	]

	cmap = cm.colors.ListedColormap(smoothen(solar_colors, skip=10))
	vmin = 0
	vmax = 1500

	return cmap, vmin, vmax

def precipmass_colormap():
	precipmass_colors = [
		[(0./255., 0./255., 0./255.), 0],
		[(0./255., 0./255., 0./255.), 25],
		[(255./255., 255./255., 255./255.), 26],
		[(255./255., 255./255., 255./255.), 59],
		[(255./255., 255./255., 0./255.), 60],
		[(255./255., 255./255., 0./255.), 69],
		[(255./255., 145./255., 0./255.), 70],
		[(255./255., 145./255., 0./255.), 79],
		[(255./255., 0./255., 0./255.), 80],
		[(255./255., 0./255., 0./255.), 89],
		[(255./255., 145./255., 145./255.), 90],
		[(255./255., 145./255., 145./255.), 100]
	]

        cmap = cm.colors.ListedColormap(smoothen(precipmass_colors, skip=1))
        vmin = 0
        vmax = 100

        return cmap, vmin, vmax


def tempchange_colormap():
	tempchange_colors = [
                [(50./255., 0./255., 102./255.), -40],
                [(0./255., 0./255., 51./255.), -35],
                [(0./255., 0./255., 102./255.), -30],
                [(0./255., 0./255., 153./255.), -25],
                [(0./255., 0./255., 255./255.), -20],
                [(51./255., 51./255., 255./255.), -15],
                [(102./255., 102./255., 255./255.), -10],
                [(153./255., 204./255., 255./255.), -5],
                [(255./255., 255./255., 255./255.), 0],
                [(255./255., 255./255., 204./255.), 5],
                [(255./255., 255./255., 153./255.), 10],
                [(255./255., 255./255., 102./255.), 15],
                [(255./255., 153./255., 51./255.), 20],
                [(204./255., 102./255., 0./255.), 25],
                [(204./255., 0./255., 0./255.), 30],
                [(153./255., 0./255., 0./255.), 35],
                [(102./255., 0./255., 0./255.), 40]
	]

	cmap = cm.colors.ListedColormap(smoothen(tempchange_colors, skip=0.1))
	vmin = -40
	vmax = 40

	return cmap, vmin, vmax

def dewpointdepp_colormap():
        dewpointdepp_colors = [
                [(29./255., 54./255., 0./255.), 0],
                [(62./255., 144./255., 38./255.), 10],
                [(148./255., 173./255., 32./255.), 20],
                [(191./255., 183./255., 24./255.), 25],
                [(210./255., 205./255., 72./255.), 30],
                [(246./255., 247./255., 165./255.), 40],
                [(255./255., 255./255., 255./255.), 50]
        ]

        cmap = cm.colors.ListedColormap(smoothen(dewpointdepp_colors, skip=0.1))
        vmin = 0
        vmax = 50

        return cmap, vmin, vmax

def batv_colormap():
        batv_colors = [
		[(255./255., 145./255., 145./255.), 0],
                [(255./255., 0./255., 0./255.), 10],
		[(255./255., 145./255., 0./255.), 11],
                [(255./255., 145./255., 0./255.), 11.4],
                [(255./255., 145./255., 0./255.), 11.5],
                [(255./255., 145./255., 0./255.), 11.6],
                [(255./255., 255./255., 0./255.), 11.7],
                [(255./255., 255./255., 0./255.), 11.8],
		[(255./255., 255./255., 0./255.), 11.9],
                [(255./255., 255./255., 255./255.), 12],
#                [(255./255., 255./255., 255./255.), 12.1],
                [(255./255., 255./255., 255./255.), 15]
        ]

        cmap = cm.colors.ListedColormap(smoothen(batv_colors, skip=.1))
        vmin = 0 
        vmax = 15

        return cmap, vmin, vmax


def pres_colormap():
        pres_colors = [
                [(204./255., 0./255., 204./255.), 994],
		[(255./255., 0./255., 255./255.), 996],
                [(191./255., 0./255., 255./255.), 998],
                [(127./255., 0./255., 255./255.), 1000],
                [(0./255., 0./255., 255./255.), 1002],
                [(0./255., 89./255., 255./255.), 1004],
                [(0./255., 140./255., 255./255.), 1008],
                [(0./255., 190./255., 255./255.), 1010],
                [(0./255., 255./255., 255./255.), 1012],
                [(0./255., 230./255., 204./255.), 1014],
                [(0./255., 204./255., 127./255.), 1016],
                [(0./255., 179./255., 0./255.), 1018],
                [(127./255., 204./255., 0./255.), 1020],
                [(204./255., 230./255., 0./255.), 1022],
                [(255./255., 255./255., 0./255.), 1024],
                [(255./255., 204./255., 0./255.), 1026],
                [(255./255., 153./255., 0./255.), 1028]

        ]

        cmap = cm.colors.ListedColormap(smoothen(pres_colors, skip=2))
        vmin = 994
        vmax = 1028

        return cmap, vmin, vmax




